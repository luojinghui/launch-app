/*!
 * openapp.js v1.0.4
 * https://github.com/luojinghui/launch-app
 * 
 * Licensed MIT © Luo Jinghui
 */
!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var i=e();for(var o in i)("object"==typeof exports?exports:t)[o]=i[o]}}(window,function(){return o={},n.m=i=[function(t,e,i){t.exports=i(1)},function(t,e,i){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),s=(r.prototype.init=function(){this.systemInfo=n.systemInfo(),this.openStatus={FAILED:"FAILED",SUCCESS:"SUCCESS",UNKNOW:"UNKNOW"}},r.prototype.open=function(){var t=this.options,e=t.applink,i=t.scheme,o=t.intent,n=t.iosUseScheme,s=this.systemInfo,r=s.weixinVersion,a=s.isIOS,l=s.isWeixin,c=s.isAndroid,u=s.isChrome,d=s.isSafari,p=s.isFirefox,f=s.isIPad;if(this.timeoutEvent(),a)l&&r<"7.0.5"?(this.msg="isIosLowVersionWechat",this.locationCall(i)):e?this.locationCall(e):n&&i&&(this.locationByIframeCall(i),this.locationCall(i));else if(f&&n)this.locationCall(i);else if(c){if(l&&(this.msg="isAndroidWechat"),u&&!l&&o)return this.locationCall(o),void this.locationCall(i);this.locationCall(i)}else d||p?this.locationByIframeCall(i):this.locationCall(i)},r.prototype.download=function(){var t=this.options,e=t.wechatJumpYYB,i=t.downloadUrl,o=t.yyb,n=t.appstore,s=this.systemInfo,r=s.isIOS,a=s.isWeixin,l=s.isAndroid;if(a&&l)e&&this.locationCall(o);else if(a&&r)e&&this.locationCall(n);else if(l)i?this.locationCall(i):o?this.locationCall(o):console.log("没有配置下载地址");else if(r)this.locationCall(n);else{if(i)return void this.locationCall(i);if(o)return void this.locationCall(o);console.log("没有配置下载地址")}},r.prototype.timeoutEvent=function(){var e=this,i=!1,o=!1,n=!1,t=this.options.timeout,s=this.getVisibilityPrefix(),r=s.property,a=void 0===r?"":r,l=s.eventName,c=void 0===l?"":l,u=this.systemInfo,d=u.isIOS,p=u.isSafari;function f(t){var e=document[a]||t.hidden||"hidden"==document.visibilityState;i=!0,e&&(o=!0),document.removeEventListener(c,f),document.removeEventListener("baiduboxappvisibilitychange",f)}function m(){o=i=!0}if(this.systemInfo.isSamsung&&(t=t<=1e3?t+300:t),window.addEventListener("blur",m),document.addEventListener(c,f,!1),document.addEventListener("baiduboxappvisibilitychange",f,!1),!(d&&p&&this.options.iosUseScheme)){var h=document.createElement("input"),v=function(t){n||(o=i=!0)};h.setAttribute("id","input"),h.setAttribute("readonly",""),h.setAttribute("autocomplete","off"),h.setAttribute("type","text"),this.options.copyText&&h.setAttribute("value",this.options.copyText),h.setAttribute("style","opacity: 0; position: fixed; top: 0; left: -999px; width: 1px; height: 1px"),document.body.appendChild(h),h.addEventListener("blur",v),setTimeout(function(){n=!0,h.removeEventListener("blur",v),clearInterval(null),h.remove()},this.options.timeout),h.focus(),this.options.copyText&&(h.select(),h.setSelectionRange(0,h.value.length),document.execCommand("copy"))}this.timer=setTimeout(function(){if(i&&o||"hidden"===document.visibilityState||document.hidden)e.openEnd(e.openStatus.SUCCESS);else if(!i){var t="hidden"===document.visibilityState;window.removeEventListener("blur",m),document.removeEventListener(c,f),document.removeEventListener("baiduboxappvisibilitychange",f),t||document.hidden||i?e.openEnd(e.openStatus.UNKNOW):e.openEnd(e.openStatus.FAILED),i=!0}},this.options.timeout)},r.prototype.getVisibilityPrefix=function(){var e;return"hidden"in document?{property:"hidden",eventName:"visibilitychange"}:([{property:"webkit",eventName:"webkitvisibilitychange"},{property:"moz",eventName:"mozvisibilitychange"},{property:"ms",eventName:"msvisibilitychange"},{property:"o",eventName:"ovisibilitychange"}].forEach(function(t){t.property+"Hidden"in document&&(e=t)}),e)},r.prototype.openEnd=function(t){clearTimeout(this.timer),this.options.callback(t,this.msg),this.msg="",this.openStatus.SUCCESS},r.prototype.locationCall=function(t){window.location?window.location.href=t:document.location&&(document.location.href=t)},r.prototype.locationByIframeCall=function(t){var e=document.createElement("iframe");e.setAttribute("src",t),e.setAttribute("style","display:none"),document.body.appendChild(e),setTimeout(function(){document.body.removeChild(e)},300)},r);function r(t){this.options=o(o({},{timeout:1e3,scheme:"",intent:"",applink:"",yyb:"",appstore:"",downloadUrl:"",wechatJumpYYB:!1,iosUseScheme:!1,copyText:"",callback:function(){}}),t),this.init()}e.default=s,window.OpenApp=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.systemInfo=function(){var t=window.navigator?window.navigator.userAgent:navigator.userAgent,e=t.indexOf("Chrome")||-1,i=-1<t.indexOf("Android")||-1<t.indexOf("Adr"),o=!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),n=/Safari/.test(t)&&!/Chrome/.test(t),s=0<e,r=0<=t.indexOf("Firefox"),a=0<=t.indexOf("SamsungBrowser"),l="micromessenger"==t.toLowerCase().match(/MicroMessenger/i),c=!!navigator.userAgent.match(/(iPad)/)||"MacIntel"===navigator.platform&&1<navigator.maxTouchPoints;return{isAndroid:i,isIOS:o,isSafari:n,isChrome:s,isFirefox:r,isWeixin:l,isSamsung:a,weixinVersion:function(){var e=[];try{e=navigator.appVersion.match(/micromessenger\/(\d+\.\d+\.\d+)/i)||[]}catch(t){e=[]}return e[1]||""}(),isIPad:c}}}],n.c=o,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0);function n(t){if(o[t])return o[t].exports;var e=o[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,n),e.l=!0,e.exports}var i,o});